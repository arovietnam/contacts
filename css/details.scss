/**
 * @copyright Copyright (c) 2018 John Molakvoæ <skjnldsv@protonmail.com>
 *
 * @author John Molakvoæ <skjnldsv@protonmail.com>
 *
 * @license GNU AGPL version 3 or any later version
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */

#contact-details {

	// header
	header {
		height: 100px;
		display: flex;
		font-weight: bold;
		align-items: center;

		// AVATAR
		#contact-header-avatar {
			position: relative;
			height: 75px;
			width: 75px;
			border-radius: 50%;
			overflow: hidden;
			flex-shrink: 0;
			margin: 0 22px 0 44px;
			.contact-avatar-background {
				background-color: var(--color-background-dark);
				opacity: .2;
				z-index: 0;
			}
			img {
				z-index: 1;
			}
			label.icon-upload-white {
				opacity: .5;
				z-index: 2;
				&:hover,
				a:active,
				a:focus {
					opacity: .7;
				}
			}
			img +  label.icon-upload-white {
				opacity: 0;
			}
			.contact-avatar-background,
			img,
			label.icon-upload-white {
				position: absolute;
				width: 100%;
				height: 100%;
			}
		}
		
		// ORG-TITLE-NAME
		#contact-header-infos {
			display: flex;
			flex-direction: column;
			flex: 1 1;
			h2,
			#details-org-container {
				display: flex;
				margin: 0;
			}
			input {
				font-size: inherit;
				color: #fff !important;
				text-shadow: 0 0 2px var(--color-box-shadow);
				background: transparent;
				border: none;
				text-overflow: ellipsis;
				overflow: hidden;
				white-space: nowrap;
				max-width: 100%;
				margin: 0;
				padding: 4px 5px;
				flex: 1 1;
				&::placeholder {
					color: #fff !important;
					opacity: .8;
				}
			}
			#contact-org {
				max-width: 20%;
				min-width: 10vw;
			}
		}

		// ACTIONS
		#contact-header-actions {
			position: relative;
			.menu-icon {
				height: 44px;
				width: 44px;
				padding: 14px;
				cursor: pointer;
			}
		}
	}

	$grid-height-unit: 40px;
	$grid-input-padding: 7px;
	$grid-input-margin: 3px;
	$grid-column-width: 380px;
	$grid-input-height-with-margin: #{$grid-height-unit - $grid-input-margin * 2};
	
	@mixin generate-grid-span($default-unit) {
		/* we only supports 10 props of the same type */
		@for $i from 1 through 10 {
			&.grid-span-#{$i} {
				/* default unit + title + bottom padding */
				grid-row-start: span #{$i * $default-unit};
			}
		}
	}

	// contact details
	section.contact-details {
		display: grid;
		/* unquote is a strange hack to avoid removal of the comma by the scss compiler */
		grid-template-columns: repeat(auto-fit, minmax(unquote('#{$grid-column-width}'), 1fr));
		grid-column-gap: 20px;
		.contact-details-property {
			@include generate-grid-span(1);
			display: flex;
			flex-wrap: wrap;
			flex-direction: column;
			position: relative;
			width: $grid-column-width;
			.icon-delete {
				position: absolute;
				top: 0;
				right: 0;
				width: 44px;
				height: 44px;
				border: 0;
				background-color: transparent;
				opacity: .5;
				display: none;
				&:hover,
				a:active,
				a:focus {
					opacity: .7;
				}
			}
			&:hover,
			a:active,
			a:focus {
				.icon-delete {
					display: block;
				}
			}
		}
		.contact-details-label {
			margin: $grid-input-margin;
			margin-left: 0;
			display: inline-block;
			width: 100px;
			height: $grid-input-height-with-margin;
			padding: $grid-input-padding 0;
			text-align: right;
			opacity: .5;
			white-space: nowrap;
			overflow: hidden;
			overflow-x: hidden;
			text-overflow: ellipsis;
			vertical-align: middle;
		}
		.contact-details-property-row {
			display: flex;
			align-items: center;
		}
	}
}